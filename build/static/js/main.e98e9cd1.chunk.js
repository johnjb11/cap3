(this.webpackJsonpcapstone3=this.webpackJsonpcapstone3||[]).push([[0],{102:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(22),s=c.n(a),i=c(3),j=c(106),o=c(112),l=c(77),d=c(8),b=r.a.createContext(),u=b.Provider,h=b,O=c(0);function x(){var e=Object(n.useContext)(h).user;return Object(O.jsxs)(o.a,{bg:"light",expand:"lg",children:[Object(O.jsx)(o.a.Brand,{as:d.b,to:"/",exact:!0,children:"DMS"}),Object(O.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(O.jsxs)(l.a,{className:"mr-auto",children:[Object(O.jsx)(l.a.Link,{as:d.b,to:"/",children:"Home"}),null!==e.id&&0==e.isAdmin?Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)(l.a.Link,{as:d.b,to:"/products",children:"Products"}),Object(O.jsx)(l.a.Link,{as:d.b,to:"/myOrder",children:"View Cart"}),Object(O.jsx)(l.a.Link,{as:d.b,to:"/logout",children:"Logout"})]}):null!==e.id&&1==e.isAdmin?Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)(l.a.Link,{as:d.b,to:"/Admin",children:"Products (Admin)"}),Object(O.jsx)(l.a.Link,{as:d.b,to:"/AdminOrderView",children:"Orders (Admin)"}),Object(O.jsx)(l.a.Link,{as:d.b,to:"/logout",children:"Logout"})]}):Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)(l.a.Link,{as:d.b,to:"/register",exact:!0,children:"Register"}),Object(O.jsx)(l.a.Link,{as:d.b,to:"/login",children:"Login"})]})]})})]})}var p=c(7),f=c(41),m=c.n(f),g=c(57),S=c(76),v=c(105),y=c(114),C=c(9),T=c.n(C);c(23);function A(e){var t=e.productProp;console.log(t);var c=t.name,r=t.description,a=t.price,s=(t.stocks,t.availability,t._id),j=(t.isOutofStock,Object(n.useContext)(h).user,Object(n.useState)("")),o=Object(i.a)(j,2),l=(o[0],o[1]),b=Object(n.useState)(""),u=Object(i.a)(b,2),x=(u[0],u[1]),p=Object(n.useState)([]),f=Object(i.a)(p,2),m=(f[0],f[1]),g=Object(n.useState)(""),C=Object(i.a)(g,2),T=(C[0],C[1]),A=Object(n.useState)(""),k=Object(i.a)(A,2),I=(k[0],k[1]),N=Object(n.useState)(""),P=Object(i.a)(N,2),E=(P[0],P[1]),L=Object(n.useState)(""),D=Object(i.a)(L,2),B=(D[0],D[1]);return Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/myOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){l(e.orderId),x(e.userId),m(e.cartList),T(e.quantity),I(e.subTotal),E(e.totalAmount),B(e.status)}))}),[s]),Object(O.jsx)(S.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsxs)(y.a.Body,{children:[Object(O.jsx)(y.a.Title,{children:c}),Object(O.jsx)(y.a.Subtitle,{children:r}),Object(O.jsxs)(y.a.Text,{children:["Php ",a]}),Object(O.jsx)(d.b,{className:"btn btn-primary m-2",to:"/products/".concat(s),children:"See Details"})]})})})})}function k(){var e=Object(n.useContext)(h),t=e.user,c=(e.setUser,Object(n.useState)([])),r=Object(i.a)(c,2),a=r[0],s=r[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/products/all").then((function(e){return e.json()})).then((function(e){console.log(e),s(e.map((function(e){return Object(O.jsx)(A,{productProp:e},e.id)})))}))}),[]),null!==t.id&&!0===t.isAdmin?Object(O.jsx)(p.a,{to:"/admin"}):Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)("h1",{children:"Products"}),a]})}var I=c(107),N=c(108);function P(){var e=Object(p.h)().productId,t=Object(n.useContext)(h).user,c=Object(p.g)(),r=Object(n.useState)(""),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(n.useState)(""),b=Object(i.a)(l,2),u=b[0],x=b[1],f=Object(n.useState)(""),v=Object(i.a)(f,2),C=v[0],A=v[1],k=Object(n.useState)(""),P=Object(i.a)(k,2),E=P[0],L=P[1],D=Object(n.useState)(""),B=Object(i.a)(D,2),w=B[0],F=B[1],U=Object(n.useState)(""),q=Object(i.a)(U,2),G=q[0],z=q[1],M=Object(n.useState)(""),R=Object(i.a)(M,2),_=(R[0],R[1]),H=Object(n.useState)([]),J=Object(i.a)(H,2),V=(J[0],J[1]),Y=Object(n.useState)(""),K=Object(i.a)(Y,2),W=(K[0],K[1]),Q=Object(n.useState)(""),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(n.useState)(""),te=Object(i.a)(ee,2),ce=te[0],ne=te[1],re=Object(n.useState)(""),ae=Object(i.a)(re,2),se=ae[0],ie=ae[1],je=function(){var e=Object(g.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),fetch("http://localhost:4000/orders/order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({orderId:G,userId:t.id,productId:n,quantity:1,subTotal:Z,status:se,totalAmount:ce})}).then((function(e){return e.json()})).then((function(e){e?(T.a.fire({title:"Product added to cart",icon:"success"}),c(-1)):T.a.fire({title:"Something went wrong",icon:"error"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/myOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){z(e.orderId),_(e.userId),V(e.cartList),W(e.quantity),$(e.subTotal),ne(e.totalAmount),ie(e.status)}))}),[e]),Object(n.useEffect)((function(){fetch("http://localhost:4000/products/".concat(e)).then((function(e){return e.json()})).then((function(e){console.log(e),o(e.name),x(e.description),A(e.price),L(e.stocks),F(e.availability)}))}),[e]),Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:Object(O.jsx)(S.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsx)(y.a.Body,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:Object(O.jsxs)(S.a,{children:[Object(O.jsx)(y.a.Title,{children:s}),Object(O.jsx)(y.a.Subtitle,{children:"Description: "}),Object(O.jsx)(y.a.Text,{children:u}),Object(O.jsx)(y.a.Subtitle,{children:"Price:"}),Object(O.jsxs)(y.a.Text,{children:["\u20b1",C]}),Object(O.jsx)(y.a.Subtitle,{children:"Description: "}),Object(O.jsx)(y.a.Text,{children:u}),Object(O.jsx)(y.a.Subtitle,{children:"Stocks: "}),Object(O.jsx)(y.a.Text,{children:E}),Object(O.jsx)(y.a.Subtitle,{children:"Available: "}),Object(O.jsx)(y.a.Text,{children:w}),null!==t.id&&!1===t.isAdmin?Object(O.jsx)(N.a,{variant:"primary",onClick:function(){return je(e)},children:"Add to cart"}):Object(O.jsx)(N.a,{variant:"primary",as:d.b,to:"/logout",children:"Sign in"})]})})})})})})})})}function E(){return Object(O.jsx)(I.a,{children:Object(O.jsxs)(S.a,{children:[Object(O.jsx)("h1",{children:"404 - Page Not Found"}),Object(O.jsx)(d.b,{to:"/",children:"Back to Homepage"})]})})}function L(){return Object(O.jsx)(I.a,{children:Object(O.jsxs)(S.a,{className:"p-5",children:[Object(O.jsx)("h1",{children:"Deadpool's Magic Shop"}),Object(O.jsx)("p",{children:"Your Superhero's Wizardy Emporium"}),Object(O.jsx)(N.a,{variant:"warning",children:Object(O.jsx)("a",{href:"/products",children:"Buy Now"})})]})})}function D(){return Object(O.jsxs)(I.a,{className:"mt-3 mb-3",children:[Object(O.jsx)(S.a,{xs:12,md:4,children:Object(O.jsx)(y.a,{className:"cardHighlight p-3",children:Object(O.jsxs)(y.a.Body,{children:[Object(O.jsx)(y.a.Title,{children:Object(O.jsx)("h2",{children:"EVERYDAY SALE. UP TO 70% OFF ON SELECTED ITEMS"})}),Object(O.jsx)(y.a.Text,{})]})})}),Object(O.jsx)(S.a,{xs:12,md:4,children:Object(O.jsx)(y.a,{className:"cardHighlight p-3",children:Object(O.jsxs)(y.a.Body,{children:[Object(O.jsxs)(y.a.Title,{children:[Object(O.jsx)("h2",{children:"FLEXIBLE INSTALLMENT PACKAGES"}),Object(O.jsx)("br",{}),Object(O.jsx)("h6",{children:"24 months, 2% interest"}),Object(O.jsx)("h6",{children:"12 months, 1% interest"}),Object(O.jsx)("h6",{children:"6 months, 0% interest"}),Object(O.jsx)("h6",{children:"3 months, 0% interest"})]}),Object(O.jsx)(y.a.Text,{})]})})}),Object(O.jsx)(S.a,{xs:12,md:4,children:Object(O.jsx)(y.a,{className:"cardHighlight p-3",children:Object(O.jsxs)(y.a.Body,{children:[Object(O.jsxs)(y.a.Title,{children:[Object(O.jsx)("h2",{children:"CONTACT US"}),Object(O.jsx)("br",{}),Object(O.jsx)("h6",{children:"Mobile Number: 09171234567"}),Object(O.jsx)("h6",{children:"Email: DMS@mail.com"}),Object(O.jsx)("h6",{children:"Facebook: Deadpool Magic Shop"}),Object(O.jsx)("h6",{children:"Instagram: @deadpoolmagicshop"})]}),Object(O.jsx)(y.a.Text,{})]})})})]})}function B(){return Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)(L,{data:{title:"Mingming's Magic Shop",content:"Your Superhero's Wizardy Emporium",destination:"/",label:"Buy now!"}}),Object(O.jsx)(D,{})]})}var w=c(111);function F(){var e=Object(n.useContext)(h).user,t=Object(p.g)(),c=Object(n.useState)(""),r=Object(i.a)(c,2),a=r[0],s=r[1],j=Object(n.useState)(""),o=Object(i.a)(j,2),l=o[0],d=o[1],b=Object(n.useState)(""),u=Object(i.a)(b,2),x=u[0],f=u[1],m=Object(n.useState)(""),g=Object(i.a)(m,2),v=g[0],y=g[1],C=Object(n.useState)(""),A=Object(i.a)(C,2),k=A[0],P=A[1],E=Object(n.useState)(""),L=Object(i.a)(E,2),D=L[0],B=L[1],F=Object(n.useState)(""),U=Object(i.a)(F,2),q=U[0],G=U[1],z=Object(n.useState)(""),M=Object(i.a)(z,2),R=M[0],_=M[1];return console.log(v),console.log(D),console.log(q),Object(n.useEffect)((function(){""!==a&&""!==l&&""!==x&&""!==v&&11===k.length&&""!==D&&""!==q&&D===q?_(!0):_(!1)}),[a,l,x,v,k,D,q]),null!==e.id?Object(O.jsx)(p.a,{to:"/products"}):Object(O.jsxs)(n.Fragment,{children:[Object(O.jsxs)(w.a,{onSubmit:function(e){return function(e){e.preventDefault(),fetch("http://localhost:4000/users/checkEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v})}).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e?T.a.fire({title:"Duplicate email found",icon:"error",text:"Please provide a different email."}):fetch("http://localhost:4000/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:a,lastName:l,address:x,email:v,mobileNo:k,password:D})}).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e?(s(""),d(""),f(""),y(""),P(""),B(""),G(""),T.a.fire({title:"Registration successful",icon:"success",text:"Your account has been created!"}),t("/login")):T.a.fire({title:"Something wrong",icon:"error",text:"Please try again."})}))}))}(e)},children:[Object(O.jsxs)(w.a.Group,{controlId:"firstName",children:[Object(O.jsx)(w.a.Label,{children:"First Name"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:"Enter first name",value:a,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{controlId:"lastName",children:[Object(O.jsx)(w.a.Label,{children:"Last Name"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:"Enter last name",value:l,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{controlId:"lastName",children:[Object(O.jsx)(w.a.Label,{children:"Address"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:"Enter your present address",value:x,onChange:function(e){return f(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{controlId:"userEmail",children:[Object(O.jsx)(w.a.Label,{children:"Email address"}),Object(O.jsx)(w.a.Control,{type:"email",placeholder:"Enter email",value:v,onChange:function(e){return y(e.target.value)},required:!0}),Object(O.jsx)(w.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(O.jsxs)(w.a.Group,{controlId:"mobileNo",children:[Object(O.jsx)(w.a.Label,{children:"Mobile Number"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:"Enter Mobile Number",value:k,onChange:function(e){return P(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{controlId:"password1",children:[Object(O.jsx)(w.a.Label,{children:"Password"}),Object(O.jsx)(w.a.Control,{type:"password",placeholder:"Password",value:D,onChange:function(e){return B(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{controlId:"password2",children:[Object(O.jsx)(w.a.Label,{children:"Verify Password"}),Object(O.jsx)(w.a.Control,{type:"password",placeholder:"Verify Password",value:q,onChange:function(e){return G(e.target.value)},required:!0})]}),R?Object(O.jsx)(N.a,{className:"my-3",variant:"primary",type:"submit",id:"submitBtn",children:"Submit"}):Object(O.jsx)(N.a,{className:"my-3",variant:"danger",type:"submit",id:"submitBtn",disabled:!0,children:"Please enter your registration details"})]}),Object(O.jsx)(I.a,{children:Object(O.jsxs)(S.a,{className:"text-center",children:["Already have an account? Click ",Object(O.jsx)("a",{href:"/login",children:"here"})," to login"]})})]})}var U=c(109);function q(e){var t=e.adminOrderProp,c=t._id,r=t.userId,a=t.cartList,s=t.totalAmount,i=t.purchasedOn;t.status,t.productId,Object(n.useContext)(h).user;return Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsxs)(I.a,{children:[Object(O.jsxs)("div",{children:["Order ID: ",c]}),Object(O.jsxs)("div",{children:["User ID: ",r]}),Object(O.jsxs)("div",{children:["Transaction Date: ",i]}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Price"}),Object(O.jsx)("th",{children:"Quantity"}),Object(O.jsx)("th",{children:"Subtotal"})]})}),Object(O.jsxs)("tbody",{children:[function(e){return e.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.productId.name}),Object(O.jsx)("td",{children:e.productId.price}),Object(O.jsx)("td",{children:e.quantity}),Object(O.jsx)("td",{children:e.subTotal})]})}))}(a),Object(O.jsx)("br",{}),Object(O.jsxs)("h4",{children:["TOTAL AMOUNT DUE: \u20b1",s]})]})]})]}),Object(O.jsx)("br",{})]})})}function G(){var e=Object(n.useContext)(h),t=(e.user,e.setUser,Object(n.useState)([])),c=Object(i.a)(t,2),r=c[0],a=c[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/allOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){a(e.map((function(e){return Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(q,{adminOrderProp:e},e.id)})})))}))}),[]),Object(O.jsxs)(n.Fragment,{children:[Object(O.jsx)("h1",{children:"ORDER HISTORY"}),Object(O.jsx)(j.a,{children:r})]})}var z=c(115),M=c(116);function R(){var e=Object(n.useContext)(h),t=(e.user,e.setUser,Object(p.g)(),Object(n.useState)("")),c=Object(i.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),j=Object(i.a)(s,2),o=j[0],l=j[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),u=b[0],x=b[1],f=Object(n.useState)(""),m=Object(i.a)(f,2),g=m[0],v=m[1],y=Object(n.useState)(""),C=Object(i.a)(y,2),A=C[0],k=C[1],P=Object(n.useState)(!0),E=Object(i.a)(P,2),L=E[0],D=E[1],B=Object(n.useState)(!1),F=Object(i.a)(B,2),q=F[0],G=F[1];return Object(n.useEffect)((function(){""!==r&&""!==o&&""!==u&&""!==g&&""!==A&&""!==L&&""!==q?(G(!0),D(!1)):(G(!1),D(!0))}),[r,o,u,g,A,L,q]),Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(I.a,{children:Object(O.jsx)(S.a,{children:Object(O.jsx)(w.a,{onSubmit:function(e){return function(e){e.preventDefault(),fetch("http://localhost:4000/products/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({name:r,description:o,price:u,stocks:g,availability:A})}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e),e?T.a.fire({title:"Product successfully added.",icon:"success"}):T.a.fire({title:"Failed",icon:"error",text:"Error: Duplicate item found."})})),a(""),l(""),x(""),v(""),k(""),D(""),G("")}(e)},children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Description"}),Object(O.jsx)("th",{children:"Price"}),Object(O.jsx)("th",{children:"Stocks"}),Object(O.jsx)("th",{children:"Availability"}),Object(O.jsx)("th",{children:"isOutofStock"}),Object(O.jsx)("th",{children:"isActive"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{controlId:"name",children:Object(O.jsx)(w.a.Control,{type:"name",placeholder:"Product Name",value:r,onChange:function(e){return a(e.target.value)},required:!0})})}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{children:Object(O.jsx)(w.a.Control,{type:"description",placeholder:"Description",value:o,onChange:function(e){return l(e.target.value)},required:!0})})}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{children:Object(O.jsx)(w.a.Control,{type:"price",placeholder:"Php",value:u,onChange:function(e){return x(e.target.value)},required:!0})})}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{children:Object(O.jsx)(w.a.Control,{type:"stocks",placeholder:"Number of stocks",value:g,onChange:function(e){return v(e.target.value)},required:!0})})}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{children:Object(O.jsx)(w.a.Control,{type:"availability",placeholder:"Availability",value:A,onChange:function(e){return k(e.target.value)},required:!0})})}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{children:Object(O.jsx)(w.a.Control,{type:"isOutofStock",placeholder:"isOutofStock",value:L,onChange:function(e){return D(e.target.value)},required:!0})})}),Object(O.jsx)("td",{children:Object(O.jsx)(w.a.Group,{children:Object(O.jsx)(w.a.Control,{type:"isActive",placeholder:"isActive",value:q,onChange:function(e){return G(e.target.value)},required:!0})})})]}),Object(O.jsx)("tr",{children:Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{variant:"primary",type:"submit",id:"submitBtn",children:"Add"})})})]})]})})})})})}function _(e){var t=e.adminProductProp,c=t.name,r=t.description,a=t.price,s=t.stocks,i=t.availability;t._id;return Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:Object(O.jsx)(S.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsx)(y.a.Body,{children:Object(O.jsx)(j.a,{children:Object(O.jsxs)(I.a,{children:[Object(O.jsx)(y.a.Title,{children:c}),Object(O.jsx)(y.a.Subtitle,{children:"Description:"}),Object(O.jsx)(y.a.Text,{children:r}),Object(O.jsx)(y.a.Subtitle,{children:"Price: "}),Object(O.jsx)(y.a.Text,{children:a}),Object(O.jsx)(y.a.Subtitle,{children:"Stocks: "}),Object(O.jsx)(y.a.Text,{children:s}),Object(O.jsx)(y.a.Subtitle,{children:"Availability: "}),Object(O.jsx)(y.a.Text,{children:i})]})})})})})})})})}var H=c(110),J=c(113);c(100);function V(e){var t=e.adminEditProp,c=t.name,r=t.description,a=t.price,s=t.stocks,o=t.availability,l=t._id;console.log(t);var d=Object(n.useState)(!1),b=Object(i.a)(d,2),u=b[0],x=b[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),m=f[0],g=f[1],v=Object(n.useState)(""),C=Object(i.a)(v,2),A=C[0],k=C[1],P=Object(n.useState)(""),E=Object(i.a)(P,2),L=E[0],D=E[1],B=Object(n.useState)(""),F=Object(i.a)(B,2),U=F[0],q=F[1],G=Object(n.useState)(""),z=Object(i.a)(G,2),M=z[0],R=z[1],_=Object(n.useContext)(h);_.user,_.setUser;return Object(O.jsxs)(j.a,{children:[Object(O.jsx)(I.a,{children:Object(O.jsx)(S.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsx)(y.a.Body,{children:Object(O.jsx)(j.a,{children:Object(O.jsxs)(I.a,{children:[Object(O.jsxs)(S.a,{children:[Object(O.jsx)(y.a.Title,{children:"Product Id:"}),Object(O.jsx)(y.a.Title,{children:"Name:"}),Object(O.jsx)(y.a.Title,{children:"Description:"}),Object(O.jsx)(y.a.Title,{children:"Price:"}),Object(O.jsx)(y.a.Title,{children:"Stocks:"}),Object(O.jsx)(y.a.Title,{children:"Availability:"})]}),Object(O.jsxs)(S.a,{children:[Object(O.jsx)(y.a.Title,{children:l}),Object(O.jsx)(y.a.Title,{children:c}),Object(O.jsx)(y.a.Title,{children:r}),Object(O.jsx)(y.a.Title,{children:a}),Object(O.jsx)(y.a.Title,{children:s}),Object(O.jsx)(y.a.Title,{children:o})]}),Object(O.jsx)(S.a,{children:Object(O.jsxs)(H.a,{children:[Object(O.jsx)(N.a,{variant:"primary",className:"mx-1",onClick:function(){return x(!0)},children:"Edit"}),Object(O.jsx)(N.a,{variant:"primary",className:"mx-1",onClick:function(e){return function(e){e.preventDefault(e),fetch("http://localhost:4000/products/".concat(l,"/archive"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){e?T.a.fire({title:"Archived successfully!",icon:"success"}):T.a.fire({title:"Archiving failed.",icon:"error"})}))}(e)},children:"Archive"}),Object(O.jsx)(N.a,{variant:"primary",className:"mx-1",onClick:function(e){fetch("http://localhost:4000/products/".concat(l,"/activate"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){e?(console.log(e),T.a.fire({title:"Successfully activated",icon:"success"})):T.a.fire({title:"Activation failed",icon:"error"})}))},children:"Restore"})]})})]})})})})})}),Object(O.jsx)(J.a,{show:u,onHide:function(){return x(!1)},children:Object(O.jsxs)(w.a,{onSubmit:function(e){return function(e,t){e.preventDefault(),fetch("http://localhost:4000/products/".concat(t,"/update"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({name:m,description:A,price:L,stocks:U,availability:M})}).then((function(e){return e.json()})).then((function(e){console.log(e),e?T.a.fire({title:"Product updated.",icon:"success"}):T.a.fire({title:"Error updating. Try again.",icon:"error"})}))}(e,l)},children:[Object(O.jsxs)(J.a.Body,{children:[Object(O.jsxs)(w.a.Group,{children:[Object(O.jsx)(w.a.Label,{children:"Name"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:c,onChange:function(e){return g(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{children:[Object(O.jsx)(w.a.Label,{children:"Description"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:r,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{children:[Object(O.jsx)(w.a.Label,{children:"Price"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:a,onChange:function(e){return D(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{children:[Object(O.jsx)(w.a.Label,{children:"Stocks"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:s,onChange:function(e){return q(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{children:[Object(O.jsx)(w.a.Label,{children:"Availability"}),Object(O.jsx)(w.a.Control,{type:"text",placeholder:o,onChange:function(e){return R(e.target.value)},required:!0})]})]}),Object(O.jsx)(J.a.Footer,{children:Object(O.jsx)(N.a,{variant:"primary",type:"submit",children:"Submit"})})]})})]})}function Y(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=(t[0],t[1]),r=Object(n.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(n.useState)(""),d=Object(i.a)(l,2),b=d[0],u=d[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/products/all").then((function(e){return e.json()})).then((function(e){c(e.map((function(e,t){return Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(_,{adminProductProp:e},e.id)})})))}))}),[]),Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsx)("div",{}),Object(O.jsxs)(w.a,{children:[Object(O.jsxs)(w.a.Group,{controlId:"search-product",children:[Object(O.jsx)("br",{}),Object(O.jsx)(w.a.Label,{children:Object(O.jsx)("h3",{children:"SEARCH FOR PRODUCT"})}),Object(O.jsx)(w.a.Control,{type:"name",value:b,placeholder:"Type name of product",onChange:function(e){return u(e.target.value)}})]}),Object(O.jsx)(N.a,{variant:"primary",type:"submit",id:"submitBtn",onClick:function(e){return function(e){e.preventDefault(e),fetch("http://localhost:4000/products/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b})}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e),o(e.map((function(e){return Object(O.jsx)(V,{adminEditProp:e},e.id)})))}),[])}(e)},children:"Search"})]}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{children:s})]})})}function K(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],r=t[1],a=Object(n.useContext)(h);a.user,a.setUser;return Object(n.useEffect)((function(){fetch("http://localhost:4000/products/all").then((function(e){return e.json()})).then((function(e){r(e.map((function(e,t){return Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(_,{adminProductProp:e},e.id)})})))}))}),[]),Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsxs)(z.a,{children:[Object(O.jsx)(M.a,{eventKey:"allProducts",title:"View All ",children:Object(O.jsx)("div",{children:Object(O.jsx)(Y,{})})}),Object(O.jsx)(M.a,{eventKey:"addProduct",title:"Add Product",children:Object(O.jsx)("div",{children:Object(O.jsx)(R,{})})})]}),Object(O.jsx)("div",{children:c})]})})}function W(){var e=Object(n.useContext)(h),t=e.user,c=e.setUser,r=Object(n.useState)(""),a=Object(i.a)(r,2),s=a[0],j=a[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),d=l[0],b=l[1],u=Object(n.useState)(!1),x=Object(i.a)(u,2),f=x[0],m=x[1];var g=function(e){fetch("http://localhost:4000/users/details",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){console.log(e),c({id:e._id,isAdmin:e.isAdmin})}))};return Object(n.useEffect)((function(){m(""!==s&&""!==d)}),[s,d]),null!==t.id?Object(O.jsx)(p.a,{to:"/"}):Object(O.jsxs)(n.Fragment,{children:[Object(O.jsxs)(w.a,{onSubmit:function(e){return function(e){e.preventDefault(),fetch("http://localhost:4000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:d})}).then((function(e){return e.json()})).then((function(e){console.log(e),"undefined"!==typeof e.access?(localStorage.setItem("token",e.access),g(e.access),T.a.fire({title:"Welcome to Deadpool's Magic Shop",icon:"success"})):T.a.fire({title:"Authentication Failed.",icon:"error",text:"Check your login details"})})),j(""),b("")}(e)},children:[Object(O.jsxs)(w.a.Group,{controlId:"userEmail",children:[Object(O.jsx)(w.a.Label,{children:"Email address"}),Object(O.jsx)(w.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:function(e){return j(e.target.value)},required:!0})]}),Object(O.jsxs)(w.a.Group,{controlId:"password",children:[Object(O.jsx)(w.a.Label,{children:"Password"}),Object(O.jsx)(w.a.Control,{type:"password",placeholder:"Password",value:d,onChange:function(e){return b(e.target.value)},required:!0})]}),f?Object(O.jsx)(N.a,{className:"my-3",variant:"primary",type:"submit",id:"submitBtn",children:"Submit"}):Object(O.jsx)(N.a,{className:"my-3",variant:"danger",type:"submit",id:"submitBtn",disabled:!0,children:"Submit"})]}),Object(O.jsx)(I.a,{children:Object(O.jsxs)(S.a,{className:"text-center",children:["Don't have an account yet? Click ",Object(O.jsx)("a",{href:"/register",children:"here"})," to register"]})})]})}function Q(){var e=Object(n.useContext)(h),t=e.unsetUser,c=e.setUser;return t(),Object(n.useEffect)((function(){c({id:null})})),Object(O.jsx)(p.a,{to:"/login"})}function X(){Object(n.useContext)(h).user;var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(""),s=Object(i.a)(a,2),o=(s[0],s[1]),l=Object(n.useState)([]),d=Object(i.a)(l,2),b=d[0],u=d[1],x=Object(n.useState)(""),p=Object(i.a)(x,2),f=(p[0],p[1],Object(n.useState)("")),m=Object(i.a)(f,2),g=(m[0],m[1],Object(n.useState)("")),S=Object(i.a)(g,2),v=S[0],y=S[1],C=Object(n.useState)(""),T=Object(i.a)(C,2),A=(T[0],T[1]),k=Object(n.useState)(""),N=Object(i.a)(k,2),P=N[0],E=N[1],L=Object(n.useState)(""),D=Object(i.a)(L,2),B=(D[0],D[1],Object(n.useState)("")),w=Object(i.a)(B,2),F=(w[0],w[1],Object(n.useState)("")),q=Object(i.a)(F,2),G=(q[0],q[1],Object(n.useState)("")),z=Object(i.a)(G,2);z[0],z[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/myOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){e=e[0],console.log(e),r(e._id),o(e.userId),u(e.cartList),y(e.totalAmount),A(e.status),E(e.purchasedOn)}))}),[]),Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsx)(I.a,{children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Price"}),Object(O.jsx)("th",{children:"Quantity"}),Object(O.jsx)("th",{children:"Subtotal"})]})}),Object(O.jsxs)("tbody",{children:[function(e){return e.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.productId.name}),Object(O.jsx)("td",{children:e.productId.price}),Object(O.jsx)("td",{children:e.quantity}),Object(O.jsx)("td",{children:e.subTotal})]})}))}(b),Object(O.jsx)("br",{}),Object(O.jsxs)("h4",{children:["TOTAL AMOUNT DUE: \u20b1",v]})]})]})}),Object(O.jsxs)("div",{children:["Order ID: ",c]}),Object(O.jsxs)("div",{children:["Transaction Date: ",P]}),Object(O.jsx)("br",{})]})})}function Z(){var e=Object(n.useContext)(h),t=(e.user,e.setUser,Object(p.g)()),c=Object(n.useState)(""),r=Object(i.a)(c,2),a=(r[0],r[1]),s=Object(n.useState)(""),o=Object(i.a)(s,2),l=(o[0],o[1]),b=Object(n.useState)(""),u=Object(i.a)(b,2),x=(u[0],u[1]),f=Object(n.useState)(""),m=Object(i.a)(f,2),g=(m[0],m[1]),S=Object(n.useState)(""),v=Object(i.a)(S,2),y=v[0],C=v[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/users/details",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){a(e.name),l(e.email),x(e.address),g(e.mobileNo)}))}),[]),Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/myOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){e=e[0],console.log(e),void 0!==e._id?C(e._id):C("")}))}),[]),console.log(y),Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsxs)(I.a,{children:[Object(O.jsx)("h1",{children:"ORDERS"}),Object(O.jsx)(X,{})]}),Object(O.jsx)(I.a,{children:Object(O.jsx)(d.b,{className:"btn btn-success",to:"/",onClick:function(e){return function(e){e.preventDefault(e),fetch("http://localhost:4000/orders/".concat(y,"/archive"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){e?(T.a.fire({title:"Thank you for shopping!",icon:"success"}),t("/")):T.a.fire({title:"Please try again.",icon:"error"})}))}(e)},children:"Checkout"})})]})})}function $(){Object(n.useContext)(h).user;var e=Object(p.g)(),t=Object(n.useState)(""),c=Object(i.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),l=(o[0],o[1]),d=Object(n.useState)([]),b=Object(i.a)(d,2),u=b[0],x=b[1],f=Object(n.useState)(""),m=Object(i.a)(f,2),g=(m[0],m[1],Object(n.useState)("")),S=Object(i.a)(g,2),v=(S[0],S[1],Object(n.useState)("")),y=Object(i.a)(v,2),C=y[0],A=y[1],k=Object(n.useState)(""),P=Object(i.a)(k,2),E=(P[0],P[1]),L=Object(n.useState)(""),D=Object(i.a)(L,2),B=D[0],w=D[1],F=Object(n.useState)(""),q=Object(i.a)(F,2),G=(q[0],q[1],Object(n.useState)("")),z=Object(i.a)(G,2),M=(z[0],z[1]),R=Object(n.useState)(""),_=Object(i.a)(R,2),H=(_[0],_[1],Object(n.useState)("")),J=Object(i.a)(H,2),V=(J[0],J[1],Object(n.useState)("")),Y=Object(i.a)(V,2);Y[0],Y[1];function K(t){T.a.fire({title:"Remove order?",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove"}).then((function(t){t.isConfirmed&&fetch("http://localhost:4000/orders/".concat(r,"/delete"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(t){T.a.fire("Successfully removed.","success"),e("/")}))}))}return Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/myOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){void 0!==(e=e[0])?(a(e._id),l(e.userId),x(e.cartList),M(e.productId),A(e.totalAmount),E(e.status),w(e.purchasedOn)):a("")}))}),[]),Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsx)(I.a,{children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Price"}),Object(O.jsx)("th",{children:"Quantity"}),Object(O.jsx)("th",{children:"Subtotal"})]})}),Object(O.jsxs)("tbody",{children:[function(e){return e.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.productId.name}),Object(O.jsx)("td",{children:e.productId.price}),Object(O.jsx)("td",{children:e.quantity}),Object(O.jsx)("td",{children:e.subTotal})]})}))}(u),Object(O.jsx)("br",{}),Object(O.jsxs)("h4",{children:["TOTAL AMOUNT DUE: \u20b1",C]})]})]})}),Object(O.jsxs)("div",{children:["Order ID: ",r]}),Object(O.jsxs)("div",{children:["Transaction Date: ",B]}),Object(O.jsx)("br",{}),Object(O.jsx)(I.a,{children:Object(O.jsx)(N.a,{variant:"danger",type:"submit",id:"delete-btn",onClick:function(e){return K()},children:"Remove"})}),Object(O.jsx)("br",{})]})})}function ee(e){var t=e.orderHistoryProp,c=t._id,r=(t.userId,t.cartList),a=t.totalAmount,s=t.purchasedOn;t.status,t.productId,Object(n.useContext)(h).user;return console.log(t),Object(O.jsx)(n.Fragment,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsx)(I.a,{children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Price"}),Object(O.jsx)("th",{children:"Quantity"}),Object(O.jsx)("th",{children:"Subtotal"})]})}),Object(O.jsxs)("tbody",{children:[function(e){return e.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.productId.name}),Object(O.jsx)("td",{children:e.productId.price}),Object(O.jsx)("td",{children:e.quantity}),Object(O.jsx)("td",{children:e.subTotal})]})}))}(r),Object(O.jsx)("br",{}),Object(O.jsxs)("h4",{children:["TOTAL AMOUNT DUE: \u20b1",a]})]})]})}),Object(O.jsxs)("div",{children:["Order ID: ",c]}),Object(O.jsxs)("div",{children:["Transaction Date: ",s]}),Object(O.jsx)("br",{})]})})}function te(){var e=Object(n.useContext)(h),t=(e.user,e.setUser,Object(n.useState)([])),c=Object(i.a)(t,2),r=c[0],a=c[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/users/myOrderHistory",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),a(e.map((function(e){return Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(ee,{orderHistoryProp:e},e.id)})})))}))}),[]),Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:r})})})}function ce(){var e=Object(n.useContext)(h),t=(e.user,e.setUser,Object(n.useState)("")),c=Object(i.a)(t,2),r=c[0],a=c[1];return Object(n.useEffect)((function(){fetch("http://localhost:4000/orders/myOrder",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){e=e[0],a(void 0!==e?e._id:"0")}))}),[]),Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:Object(O.jsxs)(z.a,{defaultActiveKey:"currentOrder",className:"mt-5 tabs-link",tabClassName:"text-secondary",children:[Object(O.jsx)(M.a,{eventKey:"currentOrder",title:"My Order",children:"0"===r?Object(O.jsx)(n.Fragment,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:Object(O.jsxs)(S.a,{className:"p-5",children:[Object(O.jsx)("h1",{children:"Deadpool's Magic Shop"}),Object(O.jsx)("p",{children:"Your Superhero's Wizardy Emporium"}),Object(O.jsx)(N.a,{variant:"warning",children:Object(O.jsx)("a",{href:"/products",children:"Buy Now"})})]})})})}):Object(O.jsx)(j.a,{children:Object(O.jsxs)(I.a,{children:[Object(O.jsx)($,{}),Object(O.jsx)(d.b,{className:"btn btn-success",to:"/checkout",children:"Proceed"})]})})}),Object(O.jsx)(M.a,{eventKey:"prev",title:"Order History",children:Object(O.jsx)(j.a,{children:Object(O.jsx)(I.a,{children:Object(O.jsx)(te,{})})})})]})})})})}var ne=function(){var e=Object(n.useState)({id:null,isAdmin:null}),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");fetch("http://localhost:4000/users/details",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){console.log(e),"undefined"!==typeof e._id?r({id:e._id,isAdmin:e.isAdmin}):r({id:null,isAdmin:null})}))}),[]),Object(O.jsx)(u,{value:{user:c,setUser:r,unsetUser:function(){localStorage.clear()}},children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(x,{}),Object(O.jsx)(j.a,{children:Object(O.jsxs)(p.d,{children:[Object(O.jsx)(p.b,{exact:!0,path:"/",element:Object(O.jsx)(B,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/login",element:Object(O.jsx)(W,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/register",element:Object(O.jsx)(F,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/logout",element:Object(O.jsx)(Q,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/myOrder",element:Object(O.jsx)(ce,{})}),Object(O.jsx)(p.b,{path:"/*",element:Object(O.jsx)(E,{})}),Object(O.jsx)(p.b,{path:"/AdminOrderView",element:Object(O.jsx)(G,{})}),Object(O.jsx)(p.b,{path:"/Admin",element:Object(O.jsx)(K,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/products",element:Object(O.jsx)(k,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/products/:productId",element:Object(O.jsx)(P,{})}),Object(O.jsx)(p.b,{exact:!0,path:"/checkout",element:Object(O.jsx)(Z,{})})]})})]})})};c(101);s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(ne,{})}),document.getElementById("root"))},23:function(e,t,c){}},[[102,1,2]]]);
//# sourceMappingURL=main.e98e9cd1.chunk.js.map